<!DOCTYPE html>
<html lang="en">
<head>
	<title>JS FE</title> 
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<style>
		*{
			box-sizing: border-box;
			margin: 0;
			padding: 0;
		}

		canvas{
			border: 1px solid #000;
			margin: 50px auto;
			display: block;
		}


	</style>
</head>
<body>

	<canvas class="game" width="400" height="300"></canvas>
	

<script>

	const canvas = document.querySelector('.game');
	const ctx = canvas.getContext('2d');
	const cWidth = canvas.offsetWidth;
	const cHeight = canvas.offsetHeight;

	const balls = [];
	const maxCount = 20;
	const maxRadius = 20;
	const minRadius = 6;
	const fps = 16.67;

	function createBall(){
		const rad = Math.floor(Math.random()*(maxRadius - minRadius) + minRadius);
		const colorChannel = () => Math.floor(Math.random()*155 + 100);
		const ball = {
			v_x: 3,
			v_y: 3,
			radius: rad,
			color: `rgb(${colorChannel()}, ${colorChannel()}, ${colorChannel()})`,
			x: rad,
			y: rad
		}
		balls.push(ball);
	}

	function drawBall(ball){
		ctx.fillStyle = ball.color;
		ctx.beginPath();
    	ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2, true);
		ctx.fill();
	}

	function moveBall(ball){
		drawBall(ball);
		// collision detection
		if(ball.x > cWidth - ball.radius || ball.x < ball.radius){
			ball.v_x = -ball.v_x;
		}
		if(ball.y > cHeight - ball.radius || ball.y < ball.radius){
			ball.v_y = -ball.v_y;
		}
		// add v_x & v_y to ball coordinates (move)
		ball.x += ball.v_x;
		ball.y += ball.v_y;

	}

	let interval = setInterval(()=>{
		if(balls.length < maxCount){
			createBall();
		}
		else{
			clearInterval(interval);
		}
	},1500);


	function clearCanvas(){
		ctx.clearRect(0,0, cWidth, cHeight);
	}

	setInterval(()=>{
		clearCanvas();
		balls.forEach(ball=>moveBall(ball));
	}, fps)


</script>
</body>
</html>