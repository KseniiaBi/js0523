<!DOCTYPE html>
<html lang="en">
<head>
	<title>JS FE</title> 
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<style>
		*{
			box-sizing: border-box;
			margin: 0;
			padding: 0;
		}

		body{
			text-align: center;
		}
		#app {
			display: flex;
			align-items: flex-start;
			flex-flow: row wrap;
			width: 300px;
			margin: 100px auto;
		}

		.square{
			border: 1px solid black;
			height: 100px;
			width: 100px;
			display: flex;
			justify-content: center;
			align-items: center;
			font-size: 55px;
			position: relative;
		}

		.line:after{
			content: '';
			display: block;
			position: absolute;
			width: 100%;
			height: 2px;
			background-color: darkred;
			z-index: 4;
		}
		

	</style>
</head>
<body>
	<h1>Tic Tac Toe</h1>
	<div class="info">Current Player is: <span>X</span></div>
	<div id="app">
		
	</div>


	<script
  src="https://code.jquery.com/jquery-3.7.0.min.js"
  integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g="
  crossorigin="anonymous"></script>
<script>

	const app = $('#app');
	const info = $('.info');
	const player = $('.info span');
	let activeX = true;
	let gameOver = false;
	let squares = ['', '', '', '', '', '', '', '', ''];

	function createGameField() {
		squares.forEach((square, index) => {
			app.append(`<div data-id="${index}" class="square">${square}</div>`);
			// square.click(()=>setSquare(index)); // onclick handler
		});
	}

	createGameField();

	$(document).on('click', (e) => {
		if($(e.target).hasClass('square')){
			if(!gameOver){
				setSquare(e.target);
			}
		}
		if($(e.target).hasClass('reset')){
			resetGame();
		}
	}); // addEventListener alias

	function setSquare(el){
		let id = +($(el).attr('data-id'));
		if(squares[id] === ''){
			let current = activeX ? 'X' : '0';
			$(el).text(current);
			player.text(current);
			squares[id] = current;
			checkGameOver();
			activeX = !activeX;
		}
	}

	function checkGameOver(){
		if(squares[0] === squares[1] && squares[1] === squares[2] && squares[0] !== '' ||
		squares[3] === squares[4] && squares[4] === squares[5] && squares[3] !== '' || 
		squares[6] === squares[7] && squares[7] === squares[8] && squares[6] !== '' ||
		squares[0] === squares[3] && squares[3] === squares[6] && squares[0] !== '' ||
		squares[1] === squares[4] && squares[4] === squares[7] && squares[1] !== '' ||
		squares[2] === squares[5] && squares[5] === squares[8] && squares[8] !== '' ||
		squares[0] === squares[4] && squares[4] === squares[8] && squares[8] !== '' ||
		squares[2] === squares[4] && squares[4] === squares[6] && squares[6] !== ''){
			info.html(`${activeX ? 'X' : '0'} won!`);
			info.after('<button class="reset">Retry</button>');
			gameOver = true;
		}
	}

	function resetGame(){
		squares.fill('');
		info.html('Current Player is: <span>X</span>');
		activeX = true;
		gameOver = false;
		$('.reset').remove();
		app.html('');
		createGameField();
	}


</script>
</body>
</html>