<!DOCTYPE html>
<html lang="en">
<head>
	<title>JS FE</title> 
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
</head>
<body>


<script>

// Map
// methods: set() has() get() delete() clear() 
// property: size

let map = new Map(); // create new Map collection
map.set('name', 'John'); // add new key-value pair
map.set(true, 'has Hobbys');
map.set(8, 'favourite number');
map.set({a: 1}, {b: 2});

console.log(map.size); // get size of collection
console.log(map.get('name')); // get value by key

map.delete(8);
console.log(map.size); 

console.log(map.has(true)); // check if data exists 

// map.clear(); // remove all data from Map

// map[key] is incorrect!

for(let data of map){
	console.log(data);
}

map.set('a', 1).set('b', 2).set('c', 3).set('a', 3); // a:1 => a:3

// map.keys() map.values() map.entries()

let user = {
	name: 'User',
	age: 22
}

let m = new Map(Object.entries(user));

//  Set

// methods: add(), has(), delete(), clear()
// property: size

let set = new Set(); // creates new set
set.add(123); // add new item to Set
set.add(456);
set.add(789);

console.log(set.size); // check size of Set

set.add(456);
set.add(789);
console.log(set.size);

console.log(set.has(123)); // check if data exists in Set

set.delete(123); // returns true if data was deleted and false if not

// set.clear(); // clear all data from collection

for(let data of set){
	console.warn(data);
}

set.forEach((item, itemmm, set) => console.log(`${item}: ${itemmm}, collection: ${set}`));

//  keys() values() entries()

let s = set.entries();
console.log(s);

// *** WeakMap & WeakSet -> garbage collector can remove inaccessible data from these collections



// Symbol

let name = Symbol('name');
let name2 = Symbol('name');

// name === name2; // false

// alert(name); // Cannot convert a Symbol value to a string
//alert(name.toString()); // Symbol(name)

user[name] = 'J. R. Doe';

for(let prop in user){
	console.log(`${prop}: ${user[prop]}`);
}

let clone = Object.assign({}, user);
console.log(clone);

// global Symbols

let id = Symbol.for('id');
let id2 = Symbol.for('id'); // !!! if was no Symbol was description 'id', it creates new, else returns existing

id === id2; // true

console.log(Symbol.keyFor(id)); // check what Symbol is in variable


// inner system Symbols: Symbol.toPrimitive Symbol.iterable


// Generators

// return and yield

function* generateNums(){ // function *generateNums()
	yield 1;
	yield 2;
	yield 3;
	yield 4;
	yield 5;
	return true;
}

let generator = generateNums();
console.log(generator.toString()); // [object Generator]

// next() => {value: val, done: true||false}

// let one = generator.next();

// for(let val of generator){
// 	console.log(val);
// }

let genArr = [-1, 0, ...generator];


// gen for iterable

// let range = {
// 	from: 1,
// 	to: 10,

// 	// for ... or range calls Symbol.iterator
// 	[Symbol.iterator](){
// 		return{
// 			current: this.from,
// 			last: this.to,
			
// 			next(){
// 				if(this.current <= this.last){
// 					return {
// 						done: false,
// 						value: this.current++
// 					}
// 				}
// 				else{
// 					return {done: true}
// 				}
// 			}
// 		}
// 	}
// }

let range = {
	from: 1,
	to: 10,

	// for ... or range calls Symbol.iterator
	*[Symbol.iterator](){
		for(let value = this.from; value <= this.to; value++){
			yield value;
		}
	}
}

//range[Symbol.iterator] undefined => for ... of will not work

for(let num of range){
	console.log(num);
}


function* foo(){
	let sum = yield '1+1 = ?'
	console.log(sum);
}

let fooooo = foo();
console.log(fooooo.next().value); // 1+1 = ?
fooooo.next(2);


// return() 

let g = generateNums();
g.next();
console.log(g.return(222));
console.log(g.next());







</script>
</body>
</html>
